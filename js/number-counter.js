(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):"object"===typeof exports?c(require("jquery")):c(jQuery)})(function(c){var a=function(b,e){this.$element=c(b);this.options=c.extend({},a.DEFAULTS,this.dataOptions(),e);this.init()};a.DEFAULTS={from:0,to:0,speed:1E3,refreshInterval:100,decimals:0,formatter:function(b,a){return b.toFixed(a.decimals)},onUpdate:null,onComplete:null};a.prototype.init=function(){this.value=this.options.from;this.loops=Math.ceil(this.options.speed/
this.options.refreshInterval);this.loopCount=0;this.increment=(this.options.to-this.options.from)/this.loops};a.prototype.dataOptions=function(){var b={from:this.$element.data("from"),to:this.$element.data("to"),speed:this.$element.data("speed"),refreshInterval:this.$element.data("refresh-interval"),decimals:this.$element.data("decimals")},a=Object.keys(b),d;for(d in a){var c=a[d];"undefined"===typeof b[c]&&delete b[c]}return b};a.prototype.update=function(){this.value+=this.increment;this.loopCount++;
this.render();"function"==typeof this.options.onUpdate&&this.options.onUpdate.call(this.$element,this.value);this.loopCount>=this.loops&&(clearInterval(this.interval),this.value=this.options.to,"function"==typeof this.options.onComplete&&this.options.onComplete.call(this.$element,this.value))};a.prototype.render=function(){var a=this.options.formatter.call(this.$element,this.value,this.options);this.$element.text(a)};a.prototype.restart=function(){this.stop();this.init();this.start()};a.prototype.start=
function(){this.stop();this.render();this.interval=setInterval(this.update.bind(this),this.options.refreshInterval)};a.prototype.stop=function(){this.interval&&clearInterval(this.interval)};a.prototype.toggle=function(){this.interval?this.stop():this.start()};c.fn.countTo=function(b){return this.each(function(){var e=c(this),d=e.data("countTo"),f="object"===typeof b?b:{},g="string"===typeof b?b:"start";d&&"object"!==typeof b||(d&&d.stop(),e.data("countTo",d=new a(this,f)));d[g].call(d)})}});
