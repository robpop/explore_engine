{% extends "two_factor/_base_focus.html" %}
{% load i18n %}

{% load static %}

{% block cssfiles %}
<link rel="stylesheet" href="{% static 'css/login-signup.css' %}">
{% endblock %}

{% block content %}
<div class="log-sign-full-center">
  <div id="log-sign-mutable-card">
    <h1 class="log-sign-func-header">{% block title %}{% trans "Enable Two-Factor Authentication" %}{% endblock %}</h1>
    {% if wizard.steps.current == 'welcome' %}
      <p class="log-sign-2fa-auth">{% blocktrans %}You are about to enable two-factor authentication for your account using an authenticator app.{% endblocktrans %}</p>
    {% elif wizard.steps.current == 'generator' %}
      <p class="log-sign-2fa-auth">{% blocktrans %}To start using an authenticator app, use your smartphone to scan the QR code below. For example, use Authy. Then, enter the token generated by the app.
          {% endblocktrans %}</p>
      <p><img src="{{ QR_URL }}" alt="QR Code" /></p>
    {% endif %}

    <form action="" method="post">{% csrf_token %}
      {% include "two_factor/_wizard_forms.html" %}

      {# hidden submit button to enable [enter] key #}
      <div style="margin-left: -9999px" id="log-sign-2fa-enter"><input type="submit" value=""/></div>

      {% include "two_factor/_wizard_actions.html" %}
    </form>
  </div>
</div>
<script>
  try {
    document.getElementsByClassName("pull-right")[0].setAttribute("style", "float: left!important");
    document.getElementById("log-sign-mutable-card").getElementsByTagName("form")[0].style.cssText = "display:flex;justify-content:center;align-items:center;margin:27px 0;flex-direction:row-reverse";
    document.getElementById("log-sign-mutable-card").getElementsByTagName("form")[0].getElementsByClassName("btn-primary")[0].className += " btn-primary-enable2fa-tiny ripple";
    document.getElementById("log-sign-mutable-card").getElementsByTagName("form")[0].getElementsByClassName("btn-link")[0].className += " btn-link-enable2fa-tiny";
    document.getElementById("id_setup_view-current_step").parentNode.parentNode.style.cssText += "flex-wrap: wrap";
    document.getElementById("id_setup_view-current_step").parentNode.style.cssText += "width: 100%; margin: 0 auto";
    document.getElementById("id_setup_view-current_step").parentNode.getElementsByTagName("th")[0].setAttribute("style", "display: none");
    document.getElementById("id_generator-token").setAttribute("placeholder", "6-digit code");
    document.getElementById("id_generator-token").setAttribute("style", "width: 250px;margin:0 auto 35px;display: block;");
    document.getElementById("log-sign-mutable-card").getElementsByTagName("img")[0].parentNode.setAttribute("style", "text-align: center");
  } catch(err) {}
</script>
{% endblock %}
